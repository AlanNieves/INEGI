<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Estructura para Evaluación de Casos Prácticos SPC</title>
  <style>
    @page {
      size: Letter;
      margin: 0.5in;
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    body {
      font-family: Arial, sans-serif;
      font-size: 10px;
      line-height: 1.1;
      color: #000;
      background: #fff;
    }

    /* Header superior con logo a la izquierda */
    .top-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 6px;
      font-size: 9px;
      font-weight: bold;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-container {
      width: 50px;
      flex-shrink: 0;
    }

    .logo-container .inegi-logo-svg,
    .logo-container img {
      width: 100%;
      height: auto;
      max-height: 40px;
    }

    .service-text {
      font-size: 9px;
      font-weight: bold;
    }

    .header-right {
      text-align: right;
      font-size: 8px;
      line-height: 1.2;
    }

    /* Títulos centrales */
    .main-title {
      text-align: center;
      font-size: 11px;
      font-weight: bold;
      margin: 8px 0 4px 0;
      letter-spacing: 0.3px;
    }

    .case-title {
      text-align: center;
      font-size: 9px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    /* Tabla de información */
    .info-table {
      width: 100%;
      border-collapse: collapse;
      margin: 8px 0;
      border: 1px solid #000;
      table-layout: fixed;
    }

    .info-table td {
      border: 1px solid #000;
      padding: 4px 6px;
      font-size: 8px;
      vertical-align: top;
      min-height: 18px;
      height: auto;
      word-wrap: break-word;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
    }

    .info-table .label {
      font-weight: bold;
      background-color: #f8f8f8;
      width: 100px;
    }

    .info-table .value {
      background-color: #fff;
    }

    /* Secciones */
    .section {
      margin: 8px 0;
      border: 1px solid #000;
    }

    .section-header {
      background-color: #f8f8f8;
      padding: 4px 8px;
      font-weight: bold;
      font-size: 9px;
      text-align: center;
      border-bottom: 1px solid #000;
    }

    .section-content {
      padding: 8px;
      min-height: 40px;
      font-size: 8px;
      line-height: 1.3;
      word-wrap: break-word;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
    }

    .section-content.large {
      min-height: 80px;
    }

    /* Tabla de aspectos a evaluar - FORMATO ORIGINAL */
    .aspects-section {
      margin: 8px 0;
      border: 1px solid #000;
    }

    .aspects-table {
      width: 100%;
      border-collapse: collapse;
      margin: 0;
      table-layout: fixed;
    }

    .aspects-table th,
    .aspects-table td {
      border: 1px solid #000;
      padding: 4px;
      font-size: 8px;
      vertical-align: top;
      word-wrap: break-word;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
    }

    .aspects-table th {
      background-color: #f8f8f8;
      font-weight: bold;
      text-align: center;
    }

    .aspects-table .row-number {
      width: 25px;
      text-align: center;
      font-weight: bold;
    }

    .aspects-table .description {
      text-align: left;
      padding-left: 6px;
      border-right: none;
      max-width: 400px;
      word-wrap: break-word;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
    }

    .aspects-table .score-header {
      width: 80px;
      text-align: center;
      font-size: 7px;
    }

    .aspects-table .score-cell {
      width: 80px;
      text-align: center;
      border-left: 1px solid #000;
    }

    /* Líneas horizontales para escribir */
    .line-fill {
      border-bottom: 1px solid #000;
      height: 20px;
      width: 100%;
    }

    .total-row {
      font-weight: bold;
      background-color: #f8f8f8;
    }

    /* Área de firma */
    .signature-area {
      margin-top: auto;  /* Empuja el área hacia abajo */
      padding-top: 40px;
      display: flex;
      flex-direction: column;  /* Cambiamos a columna para mejor centrado */
      align-items: center;     /* Centramos horizontalmente */
      justify-content: center; /* Centramos verticalmente */
      text-align: center;
      min-height: 120px;      /* Espacio mínimo para la firma */
    }

    .signature-left {
      width: 100%;
      max-width: 340px;       /* Limitamos el ancho para mejor presentación */
      margin: 0 auto;
      text-align: center;
    }

    .signature-label {
      font-size: 7px;
      font-weight: bold;
      margin-bottom: 25px;
      text-align: center;
    }

    .signature-line {
      border-top: 1px solid #000;
      width: 250px;
      margin: 30px auto 8px;  /* Centrado con margen */
    }

    .signature-name {
      font-size: 8px;
      text-align: center;
      margin-top: 5px;
    }

    .date-section {
      margin-top: 15px;
      text-align: center;     /* Centramos la fecha también */
      font-size: 7px;
    }

    .page-number {
      text-align: center;
      font-size: 8px;
      margin-top: 15px;
    }

    .page-break { 
      page-break-before: always; 
    }
  </style>
</head>
<body>
  {{#each casos}}
  <div class="{{#if @index}}page-break{{/if}}">
    
    <!-- Header con logo a la izquierda -->
    <div class="top-header">
      <div class="header-left">
        <div class="logo-container">
          {{#if ../logoInline}}
            {{{../logoInline}}}
          {{else}}
            <img src="{{../logoSrc}}" alt="INEGI" />
          {{/if}}
        </div>
        <div class="service-text">SERVICIO PROFESIONAL DE CARRERA</div>
      </div>
      <div class="header-right">
        <div>{{enc.convocatoria}}</div>
        <div>{{enc.concurso}}</div>
        <div>{{enc.codigoPuesto}}</div>
        <div><strong>FOLIO:</strong> {{enc.folio}}</div>
      </div>
    </div>

    <!-- Títulos -->
    <div class="main-title">ESTRUCTURA PARA EVALUACIÓN DE CASOS PRÁCTICOS SPC</div>
    <div class="case-title">CASO PRÁCTICO {{add @index 1}}</div>

    <!-- Tabla de información -->
    <table class="info-table">
      <tr>
        <td class="label">Convocatoria:</td>
        <td class="value">{{enc.convocatoria}}</td>
        <td class="label">Unidad Administrativa:</td>
        <td class="value">{{enc.unidadAdministrativa}}</td>
      </tr>
      <tr>
        <td class="label">Concurso:</td>
        <td class="value">{{enc.concurso}}</td>
        <td class="label">Puesto:</td>
        <td class="value">{{enc.puesto}}</td>
      </tr>
      <tr>
        <td class="label">Código:</td>
        <td class="value">{{enc.codigoPuesto}}</td>
        <td class="label">Folio:</td>
        <td class="value">{{enc.folio}}</td>
      </tr>
      <tr>
        <td class="label">Duración (min):</td>
        <td class="value">{{enc.duracionMin}}</td>
        <td class="label">Modalidad:</td>
        <td class="value">{{enc.modalidad}}</td>
      </tr>
    </table>

    <!-- I. Temas de la guía de estudio -->
    <div class="section">
      <div class="section-header">I. TEMAS DE LA GUÍA DE ESTUDIO</div>
      <div class="section-content">
        {{temasGuia}}
      </div>
    </div>

    <!-- II. Planteamiento del caso práctico -->
    <div class="section">
      <div class="section-header">II. PLANTEAMIENTO DEL CASO PRÁCTICO</div>
      <div class="section-content large">
        {{planteamiento}}
      </div>
    </div>

    <!-- III. Equipo adicional requerido -->
    <div class="section">
      <div class="section-header">III. EQUIPO ADICIONAL REQUERIDO PARA LA APLICACIÓN</div>
      <div class="section-content">
        {{equipoAdicional}}
      </div>
    </div>

    <!-- IV. Aspectos a evaluar - FORMATO ORIGINAL -->
    <div class="aspects-section">
      <div class="section-header">IV. ASPECTOS A EVALUAR</div>
      <table class="aspects-table">
        <thead>
          <tr>
            <th class="row-number"></th>
            <th class="description"></th>
            <th class="score-header">PUNTAJE POR<br/>CRITERIO A EVALUAR</th>
          </tr>
        </thead>
        <tbody>
          {{#each aspectos}}
          <tr>
            <td class="row-number">{{add @index 1}}</td>
            <td class="description">{{descripcion}}</td>
            <td class="score-cell">{{#if puntaje}}{{puntaje}}{{/if}}</td>
          </tr>
          {{/each}}
          
          {{#unless aspectos}}
          {{#range 1 11}}
          <tr>
            <td class="row-number">{{this}}</td>
            <td class="description"><div class="line-fill"></div></td>
            <td class="score-cell"></td>
          </tr>
          {{/range}}
          {{/unless}}
          
          <tr class="total-row">
            <td colspan="2" style="text-align: right; padding-right: 10px; font-weight: bold;">TOTAL</td>
            <td class="score-cell" style="font-weight: bold;">{{#if total}}{{total}}{{else}}0{{/if}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Área de firma -->
    <div class="signature-area">
  <div class="signature-left">
    <div class="signature-line"></div>
    <div class="signature-name">{{enc.nombreEspecialista}}</div>
    <div class="date-section">
      <div style="font-weight: bold;">FECHA DE ELABORACIÓN</div>
      <div style="margin-top: 15px;">{{enc.fechaElaboracion}}</div>
    </div>
  </div>
</div>
  </div>
  {{/each}}
</body>
</html>